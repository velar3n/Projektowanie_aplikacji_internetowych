<div class="header">
    <div class="navbar_container">
        <a href="<%= baseUrl19 %>/" aria-current="page" class="navbar_logo" id="navbar_logo">
            <img src="<%= baseUrl19 %>/images/logo.png" loading="lazy">
        </a>
        <nav class="navbar" id="navbar">
            <a href="<%= baseUrl19 %>/">Home</a>
            <a href="<%= baseUrl19 %>/recipes">Recipes</a>
        </nav>

        <div class="navbuttons" id="navbuttons">
            <% if (showAddButton) { %>
                <button class="login_btn" onclick="window.location.href='<%= baseUrl19 %>/recipes_add';">Add Recipe</button>
            <% } %>
            <% if (showEditDelete) { %>
                <button class="login_btn" onclick="window.location.href='<%= baseUrl19 %>/recipes/<%= recipe.id %>/edit'">Edit Recipe</button>
                <button class="login_btn" onclick="deleteRecipe('<%= recipe.id %>')">Delete Recipe</button>
            <% } %>
            <div class="fa fa-bars" id="menu_btn" onclick="showMenu()"></div>
        </div>

        <nav class="navbar2" id="navbar2">
            <a href="#" onclick="hideMenu()">Exit Menu</a>
            <a href="<%= baseUrl19 %>/">Home</a>
            <a href="<%= baseUrl19 %>/recipes">Recipes</a>
            <% if (showAddButton) { %>
                <a href="<%= baseUrl19 %>/recipes_add">Add Recipe</a>
            <% } %>
            <% if (showEditDelete) { %>
                <a href="<%= baseUrl19 %>/recipes/<%= recipe.id %>/edit">Edit Recipe</a>
                <a href="#" onclick="deleteRecipe('<%= recipe.id %>')">Delete Recipe</a>
            <% } %>
        </nav>

        <script>
            const baseUrl = "<%= baseUrl19 %>";

            function showMenu() {
                document.getElementById('navbar_logo').style.display = 'none';
                document.getElementById('navbar').style.display = 'none';
                document.getElementById('navbuttons').style.display = 'none';
                document.getElementById('navbar2').style.display = 'flex';
            }

            function hideMenu() {
                document.getElementById('navbar_logo').style.display = 'block';
                document.getElementById('navbar').style.display = 'flex';
                document.getElementById('navbuttons').style.display = 'flex';
                document.getElementById('navbar2').style.display = 'none';
            }

            async function deleteRecipe(recipeId) {
                const confirmed = confirm("Are you sure you want to delete this recipe?");
                if (!confirmed) return;

                try {
                const response = await fetch(`${baseUrl}/recipes/${recipeId}`, {
                    method: 'DELETE'
                });

                if (response.ok) {
                    alert('Recipe deleted');
                    window.location.href = `${baseUrl}/recipes`;
                } else {
                    const data = await response.text();
                    alert('Failed to delete recipe: ' + data);
                }
                } catch (err) {
                console.error('Delete error:', err);
                alert('An error occurred.');
                }
            }
        </script>
    </div>
</div>